// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number-array@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-beta-quantile@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-floor@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-ceil@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-binomial-cdf@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/stats-base-dists-binomial-pmf@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-number@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nan@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/math-base-special-roundn@esm/index.mjs";var b=d.isPrimitive,u=m,g=p.isPrimitive,w=h,x=c,y=l;var E=function(e,t){return u(t)?x(t,"alpha")&&(e.alpha=t.alpha,!b(e.alpha)||w(e.alpha))?new TypeError(y("0dN8h","alpha",e.alpha)):x(t,"alternative")&&(e.alternative=t.alternative,!g(e.alternative))?new TypeError(y("0dN2i","alternative",e.alternative)):x(t,"p")&&(e.p=t.p,!b(e.p)||w(e.p))?new TypeError(y("0dN8h","p",e.p)):null:new TypeError(y("0dN2h",t))},T=f,N=m,V=j.isPrimitive,k=c,P=v,R=l;var q=e,A=t,O=i,D=s,F=r,X=n,z=a,B=o,C=l,G=E,H=function(e){var t,i,s;if(i=4,t=!0,arguments.length>0){if(!N(e))throw new TypeError(R("0dN3X",e));if(k(e,"digits")){if(!T(e.digits))throw new TypeError(R("0dN3b","digits",e.digits));i=e.digits}if(k(e,"decision")){if(!V(e.decision))throw new TypeError(R("0dN30","decision",e.decision));t=e.decision}}switch(s="",s+=this.method,s+="\n\n",s+="Alternative hypothesis: ",s+="True correlation coefficient is ",this.alternative){case"less":s+="less than ";break;case"greater":s+="greater than ";break;default:s+="not equal to "}return s+=this.nullValue,s+="\n\n",s+="    pValue: "+P(this.pValue,-i)+"\n",s+="    statistic: "+P(this.statistic,-i)+"\n",s+="    "+100*(1-this.alpha)+"% confidence interval: ["+P(this.ci[0],-i)+","+P(this.ci[1],-i)+"]",s+="\n\n",t&&(s+="Test Decision: ",this.rejected?s+="Reject null in favor of alternative at "+100*this.alpha+"% significance level":s+="Fail to reject null in favor of alternative at "+100*this.alpha+"% significance level",s+="\n"),s};function I(e,t,i){return 0===e?0:D(i,e,t-e+1)}function J(e,t,i){return e===t?1:D(1-i,e+1,t-e)}var K=function(){var e,t,i,s,r,n,a,o,l,d,m,p,h,c,f;if(t={},A(arguments[0])){if(2!==(h=arguments[0]).length)throw new Error(C("invalid argument. An array argument must contain two elements. Value: `%s`.",h));m=h[1]+h[0],h=h[0],arguments[1]&&(a=G(t,arguments[1]))}else{if(m=arguments[1],!O(h=arguments[0]))throw new TypeError(C("0dN9r",h));if(!O(m))throw new TypeError(C("0dN2V",m));if(h>m)throw new TypeError(C("invalid arguments. Number of successes cannot be larger than the total number of observations. x: `%u`. n: `%u`."));arguments[2]&&(a=G(t,arguments[2]))}if(a)throw a;if((e=void 0===t.alpha?.05:t.alpha)<0||e>1)throw new RangeError(C("invalid option. `%s` option must be a number on the interval: [0, 1]. Option: `%f`.","alpha",e));if((p=void 0===t.p?.5:t.p)<0||p>1)throw new RangeError(C("invalid option. `%s` option must be a probability. Option: `%f`.","p",p));switch(r=h/m,n=t.alternative||"two-sided"){case"less":s=z(h,m,p),i=[0,J(h,m,e)];break;case"greater":s=1-z(h-1,m,p),i=[I(h,m,e),1];break;case"two-sided":if(l=B(h,m,p),h===(d=m*p))s=1;else if(h<d){for(c=0,f=X(d);f<=m;f++)B(f,m,p)<=1.0000001*l&&(c+=1);s=z(h,m,p)+(1-z(m-c,m,p))}else{for(c=0,f=0;f<=F(d);f++)B(f,m,p)<=1.0000001*l&&(c+=1);s=z(c-1,m,p)+(1-z(h-1,m,p))}i=[I(h,m,e/2),J(h,m,e/2)];break;default:throw new Error(C("0dN3t","alternative",["two-sided","less","greater"].join('", "'),n))}return q(o={},"rejected",s<=e),q(o,"alpha",e),q(o,"pValue",s),q(o,"statistic",r),q(o,"ci",i),q(o,"nullValue",p),q(o,"alternative",n),q(o,"method","Exact binomial test"),q(o,"print",H),o};export{K as default};
//# sourceMappingURL=index.mjs.map
